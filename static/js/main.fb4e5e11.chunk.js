(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{11:function(e,t,n){e.exports={backdrop:"Modal_backdrop__TEkBX",content:"Modal_content__2RfG3"}},13:function(e,t,n){e.exports={ImageGallery:"ImageGallery_ImageGallery__2DcbQ"}},14:function(e,t,n){e.exports={button:"Button_button__3vdwo"}},20:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),o=n.n(r),c=n(8),s=n.n(c),i=(n(20),n(3)),l=n(4),u=n(6),h=n(5),d=n(7),m=n.n(d),p=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={request:""},e.handleInputChange=function(t){e.setState({request:t.target.value.toLowerCase()})},e.handleSubmit=function(t){t.preventDefault();var n=e.state.request;n.trim().length>0?e.props.transRequest(n):alert("unable to add empty field!!!"),e.resetInput()},e.resetInput=function(){e.setState({request:""})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("header",{className:m.a.Searchbar,children:Object(a.jsxs)("form",{className:m.a.SearchForm,onSubmit:this.handleSubmit,children:[Object(a.jsx)("button",{type:"submit",className:m.a.SearchFormBtn,children:Object(a.jsx)("span",{className:m.a.SearchFormBtn_label,children:"Search"})}),Object(a.jsx)("input",{className:m.a.SearchFormInput,type:"text",value:this.state.request,onChange:this.handleInputChange,placeholder:"Search images and photos"})]})})}}]),n}(r.Component),g=n(9);function b(e){var t=e.list,n=e.onImgClick;return t.map((function(e){var t=e.id,r=e.tags,o=e.webformatURL,c=e.largeImageURL;return Object(a.jsx)("li",{className:"ImageGalleryItem",onClick:function(){return n(c,r)},children:Object(a.jsx)("img",{src:o,alt:r,className:"ImageGalleryItem-image"})},t)}))}var j=n(11),f=n.n(j),v=document.querySelector("#modal-root"),O=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(c.createPortal)(Object(a.jsx)("div",{className:f.a.backdrop,onClick:this.handleBackdropClick,children:Object(a.jsx)("div",{className:f.a.content,children:this.props.children})}),v)}}]),n}(r.Component),y=n(12),S=n.n(y),k=n(13),_=n.n(k),x=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={hits:[],loading:!1,showModal:!1,modalImg:null,error:null},e.URL="https://pixabay.com/api/",e.APIKey="19367568-bec790f08eb1ec18688a31f32",e.perPage=12,e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.onImgClick=function(t,n){e.setState({modalImg:{link:t,tag:n}}),e.toggleModal()},e.scroll=function(){setTimeout((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}),console.log("must scroll")}),700)},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this,a=e.query,r=this.props.query,o=e.page,c=this.props.page;r===a&&c===o||(this.setState({loading:!0}),setTimeout((function(){fetch("".concat(n.URL,"?q=").concat(r,"&page=").concat(c,"&key=").concat(n.APIKey,"&image_type=photo&orientation=horizontal&per_page=").concat(n.perPage)).then((function(e){return e.ok?e.json():Promise.reject(new Error('\u041a\u0430\u0440\u0442\u0438\u043d\u043e\u043a \u0441 \u0438\u043c\u0435\u043d\u0435\u043c "'.concat(r,'" \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e!!!')))})).then((function(e){var t=e.hits;return n.setState((function(e){return r!==a?{hits:Object(g.a)(t)}:{hits:[].concat(Object(g.a)(e.hits),Object(g.a)(t))}}))})).catch((function(e){return n.setState({error:e})})).finally(n.setState({loading:!1}))}),1e3)),this.scroll()}},{key:"render",value:function(){var e=this.state,t=e.hits,n=e.loading,r=e.showModal,o=e.modalImg,c=e.error;return console.log(t),Object(a.jsxs)("div",{children:[n&&Object(a.jsx)(S.a,{type:"ThreeDots",color:"#00BFFF",height:80,width:80,timeout:3e3}),Object(a.jsxs)("ul",{className:_.a.ImageGallery,children:[c&&Object(a.jsx)("h2",{children:c.message}),t.length>0&&Object(a.jsx)(b,{list:t,onImgClick:this.onImgClick}),r&&Object(a.jsx)(O,{onClose:this.toggleModal,children:Object(a.jsx)("img",{src:o.link,alt:o.tag})})]})]})}}]),n}(r.Component),w=n(14),I=n.n(w);function C(e){var t=e.onClick;return Object(a.jsx)("button",{type:"button",className:I.a.button,onClick:t,children:"Load more"})}var B=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={request:"",page:1},e.addRequest=function(t){e.setState({request:t,page:1})},e.nextPage=function(){e.setState((function(e){var t=e.page;return{page:t+=1}}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.request,n=e.page;return console.log("page",n),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(p,{transRequest:this.addRequest}),Object(a.jsx)(x,{query:t,page:n}),t&&Object(a.jsx)(C,{onClick:this.nextPage})]})}}]),n}(r.Component),F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),o(e),c(e)}))};s.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(B,{})}),document.getElementById("root")),F()},7:function(e,t,n){e.exports={Searchbar:"SearchBar_Searchbar__27TuN",SearchForm:"SearchBar_SearchForm__GXkTB",SearchFormBtn:"SearchBar_SearchFormBtn__1jGuk",SearchFormBtn_label:"SearchBar_SearchFormBtn_label__3gvn-",SearchFormInput:"SearchBar_SearchFormInput__3eTqj"}}},[[42,1,2]]]);
//# sourceMappingURL=main.fb4e5e11.chunk.js.map